<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" >
<html xmlns="http://www.w3.org/1999/xhtml"   >
	 
 
<head>
    <title>SNOOP</title>
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">  
           
   <link rel="stylesheet" type="text/css" href="css/core.css?s"/>  
<script src="script/jquery.min.js"></script>
        
  </head>  
  
    
<style>
html, body {
    margin: 0;
    padding: 0;
    width:100%; 
    height: 100%;  
    overflow:hidden; 
    background: #f7f7f7;
}
iframe {
    display: block;
    
    min-width: 0px;
    height: 100%;
    margin: 0;
    padding: 0;
    border: 0;
    background:#f7f7f7;
    border:none;
}
#snoop_header{
	 width: 100%;
	 height: 30px; 
	 
	 
     
	
	
}.snoop_wrapper{
    
}
    
       #snoop_report{
        min-width: 300px; 
        
           height: calc(100% - 30px); margin-top: 30px; 
        background: #666; 
           position: absolute; right:  0px; top: 0;
    }
    
    
.snoop_header_bar{
	background: #333 url("img/snooplogo_dark.png") no-repeat; 
	background-position:left 12px top 2px;
	background-size:  100px ;
	padding-left: 33px;
	font-family: Arial, Helvetica, sans-serif ;
	font-size:12px;
	line-height:30px;
	color:#fff;
    border-top:red 2px solid;
	
}
  
    
    #snoop_url_addressbar{
        border: 0px solid #cecece;
        height: 20px; 
        min-width: 500px; 
        width: 200px;
        margin-top: 3px; 
        border-radius: 3px; 
       
    
    }
    #snoop_url_go{
        width: auto; 
        height: 20px;
        display: inline-block;
        
    }
    
    #snoop_control{
        
         position: absolute;
        right: 110px; 
        
    }
    
    #snoop_wrpper_container{
        
        width: calc(100% - 300px); 
        height: calc(100% - 30px); 
            margin-top: 30px; 
            background:#f7f7f7; 
            position: absolute; 
            left: 0; 
            top: 0; 
            overflow:hidden;
    }
    
    @keyframes spinner {
  to {transform: rotate(360deg);}
}
 
    .spinner{
        
          display:inline-block;
    }
.spinner:before {
  content: '';
  box-sizing: border-box;
  position: absolute;
  top: 16px;
  right: 4px;
  width: 14px;
  height: 14px;
  margin-top: -8px;
  margin-left: -8px;
  border-radius: 50%;
  border: 2px solid #ccc;
  border-top-color: #333;
  animation: spinner .6s linear infinite;
}
    
    
    </style>

<body> 
    
    
<div id="snoop_wrpper_container"  
      >
	     
<iframe 
id="snoop_frame" 
         
onunload ="StartUpdateURL(this.contentWindow.location)"
onload="FinishUpdateURL(this.contentWindow.location)" 
style="width:100%;  "   frameborder="0" scrollbar="yes"
nwdisable=true    
nwfaketop=true    
nwUserAgent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36"   
src="welcome.html"   ></iframe>
         
 </div>
    <div id="snoop_report">
    
 
        
        
<div id="loginModal">    
        <form id="loginForm" action=""  method="POST">
        <div class="login-panel panel panel-default">
        <div class="panel-heading">Please Sign in</div>
            <div class="panel-body">
            <div class="form-group">
                <label class="control-label">username</label>
                <input type="text" name="username" class="form-control" required="required">
            </div>
            <div class="form-group">
                <label class="control-label">password</label>
                <input type="password" name="passwd" class="form-control" required="required">
            </div>
            <span id="snoop_result" class="alert alert-danger"></span>    
                <button type="submit" class="btn btn-success loginField">Login</button>
            </div>
        </div>
    </form>
</div>  
        
        
        
         
        <div id="snoop_profile">
            <span id="snoop_username">Guest</span><span id="snoop_loginout" ><span onclick='ShowLogin()'>Login</span></span>
        </div>
        
        
<!-- the result of the search will be rendered inside this div -->
<div id="result"></div>

<script>
    
window.snoop_var_username = "";
window.snoop_var_user_type = "";
window.snoop_var_last_authentication_status = "checked";
function ShowLogin(){
    
    $("#loginModal").show();
    
    
}
function HideLogin(){
    
    $("#loginModal").hide();
    
    
}
  
    
    
    
 function Update_authentication_ui(){
     
     $( "#snoop_result").empty(); 
     
     
     if(snoop_var_username == ""){
         $( "#snoop_username" ).empty().append( "Guest" );
         $( "#snoop_loginout" ).empty().append( "<span onclick='ShowLogin()'>Login</span>" );
         
         
         
        }else if(snoop_var_username != ""){
         $( "#snoop_username" ).empty().append( window.snoop_var_username );
         $( "#snoop_loginout" ).empty().append( "<span onclick='Logout()'>Logout</span>" );
            
        
            
        }else {
         $( "#snoop_username" ).empty().append( "Guest" );
         $( "#snoop_loginout" ).empty().append( "<span onclick='ShowLogin()'>Login</span>" ); 
             
        }
     
     
     
     if(window.snoop_var_last_authentication_status == "login_attempted" && window.snoop_var_username == "" ){
            $( "#snoop_result").empty().append( "<span style='color:red'>Username or password incorrect</span>" ); 
            ShowLogin();
        }else{
            $( "#snoop_result").empty(); 
            
        }
 }  
    
    
 function Logout(){
     var url = "http://localhost/snoop/admin/logout_api.php"; // $form.attr( "action" );
var posting = $.post( url, { username: window.snoop_var_username    } );
// Put the results in a div
posting.done(function( data ) {
        window.snoop_var_username = "";
        window.snoop_var_user_type = "";
        window.snoop_var_last_authentication_status = "checked";
 if(data.indexOf("success")> -1){
        window.snoop_var_username = data.split("||")[1];
        window.snoop_var_user_type = data.split("||")[2];
        window.snoop_var_last_authentication_status = "login_attempted";
        Update_authentication_ui();
 }else if(data.indexOf("loggedin")> -1){
        window.snoop_var_username = data.split("||")[1];
        window.snoop_var_user_type = data.split("||")[2];
        window.snoop_var_last_authentication_status = "checked";
     Update_authentication_ui();
 }else if(data.indexOf("failed")> -1){
        window.snoop_var_username = data.split("||")[1];
        window.snoop_var_user_type = data.split("||")[2];
        window.snoop_var_last_authentication_status = "login_attempted";
     Update_authentication_ui();
 }else if(data.indexOf("expired")> -1){
        window.snoop_var_username = "";
        window.snoop_var_user_type = "";
        window.snoop_var_last_authentication_status = "checked";
     Update_authentication_ui();
     
 }else if(data.indexOf("loggedout")> -1){
        window.snoop_var_username = "";
        window.snoop_var_user_type = "";
        window.snoop_var_last_authentication_status = "loggedout";
     Update_authentication_ui();
     
 }; 

     
    
});
     
 }  
    
    
    
 function Check_Auth(){
     var url = "http://localhost/snoop/admin/check_auth_api.php"; // $form.attr( "action" );
var posting = $.post( url, { username: window.snoop_var_username    } );
// Put the results in a div
posting.done(function( data ) {
        window.snoop_var_username = "";
        window.snoop_var_user_type = "";
        window.snoop_var_last_authentication_status = "checked";
 if(data.indexOf("success")> -1){
        window.snoop_var_username = data.split("||")[1];
        window.snoop_var_user_type = data.split("||")[2];
        window.snoop_var_last_authentication_status = "login_attempted";
        Update_authentication_ui();
 }else if(data.indexOf("loggedin")> -1){
        window.snoop_var_username = data.split("||")[1];
        window.snoop_var_user_type = data.split("||")[2];
        window.snoop_var_last_authentication_status = "checked";
     Update_authentication_ui();
 }else if(data.indexOf("failed")> -1){
        window.snoop_var_username = data.split("||")[1];
        window.snoop_var_user_type = data.split("||")[2];
        window.snoop_var_last_authentication_status = "login_attempted";
     Update_authentication_ui();
 }else if(data.indexOf("expired")> -1){
        window.snoop_var_username = "";
        window.snoop_var_user_type = "";
        window.snoop_var_last_authentication_status = "checked";
     Update_authentication_ui();
     
 }else if(data.indexOf("loggedout")> -1){
        window.snoop_var_username = "";
        window.snoop_var_user_type = "";
        window.snoop_var_last_authentication_status = "loggedout";
     Update_authentication_ui();
     
 }; 

     
    
});
     
 }  
       
    
    
    
    
    
    
// Attach a submit handler to the form
$( "#loginForm" ).submit(function( event ) {
    HideLogin();
    
// Stop form from submitting normally
event.preventDefault();
// Get some values from elements on the page:
var $form = $( this );
var _username = $form.find( "input[name='username']" ).val();
var _password = $form.find( "input[name='passwd']" ).val();
var url = "http://localhost/snoop/admin/login_api.php"; // $form.attr( "action" );
// Send the data using post
var posting = $.post( url, { username: _username, passwd: _password } );
// Put the results in a div
posting.done(function( data ) {
        window.snoop_var_username = "";
        window.snoop_var_user_type = "";
        window.snoop_var_last_authentication_status = "checked";
 if(data.indexOf("success")> -1){
        window.snoop_var_username = data.split("||")[1];
        window.snoop_var_user_type = data.split("||")[2];
        window.snoop_var_last_authentication_status = "login_attempted";
        Update_authentication_ui();
 }else if(data.indexOf("loggedin")> -1){
        window.snoop_var_username = data.split("||")[1];
        window.snoop_var_user_type = data.split("||")[2];
        window.snoop_var_last_authentication_status = "checked";
     Update_authentication_ui();
 }else if(data.indexOf("failed")> -1){
        window.snoop_var_username = data.split("||")[1];
        window.snoop_var_user_type = data.split("||")[2];
        window.snoop_var_last_authentication_status = "login_attempted";
     Update_authentication_ui();
 }else if(data.indexOf("expired")> -1){
        window.snoop_var_username = "";
        window.snoop_var_user_type = "";
        window.snoop_var_last_authentication_status = "checked";
     Update_authentication_ui();
     
 }; 

     
    
});
});
    
    
    
    
    
    
    
Check_Auth();    
    
    
    
    
    
    
    
</script>



        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </div>






    <div id="snoop_header"  class="snoop_header_bar">
        
        
    <span id="snoop_control"><input id="snoop_url_addressbar" type="text" value="" />
    <div id="snoop_spinner" class="spinner"></div><button id="snoop_url_go"   >Load URL</button>
        
        
        <button id="snoop_url_testscreen"   >Test Current Screen</button>
        <button id="snoop_url_screenreader_sim"   >Screen-Reader Simulation</button>
        
        </span>
   
    </div>
           
    
    
    

    
    
</body>
 <script type="application/javascript" src="script/inapp_network_check.js"></script> 
    
    
    
<script>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
function GetScreenCordinates(obj) {
        var p = {};
        p.x = obj.offsetLeft;
        p.y = obj.offsetTop;
        while (obj.offsetParent) {
            p.x = p.x + obj.offsetParent.offsetLeft;
            p.y = p.y + obj.offsetParent.offsetTop;
            if (obj == document.getElementsByTagName("body")[0]) {
                break;
            }
            else {
                obj = obj.offsetParent;
            }
        }
        return p;
    }
    
    
    
    
    
    
    var $noopCore = {
        
        $core_version:"0.1",
        $core_prod:"beta",
        $core_author:"Samir Dash", 
        $core_license: "MIT License", 
        $core_email: "sdash@redhat.com", 
        $core_publish: "2017",
        $core_repo: "https://github.com/SNOOP-EcoSystem/SnoopCore", 
        $dom:$("body").html()
        
   
        
    };
    
    
   alert($noopCore.$dom);  
    
   alert($noopCore.b());   
    
var input_Arr = $('input[type="text"],input[type="password"]').toArray();
    
    
    
    
    
    
    
    for(var i=0; i<input_Arr.length; i++){
        
        console.log(input_Arr[i]);

        console.log (GetScreenCordinates(input_Arr[i]) );
         
        
    }
    
  var button_Arr = $( "button" ).toArray();
    
    for(var i=0; i<input_Arr.length; i++){
        
        console.log(input_Arr[i]);

        console.log (GetScreenCordinates(input_Arr[i]) );
         
        
    }  
    
 var button_Arr = $( "button" ).toArray();
    
    for(var i=0; i<input_Arr.length; i++){
        
        console.log(input_Arr[i]);

        console.log (GetScreenCordinates(input_Arr[i]) );
         
        
    } 
    
   var a_Arr = $( "a" ).toArray();
    
    for(var i=0; i<input_Arr.length; i++){
        
        console.log(input_Arr[i]);

        console.log (GetScreenCordinates(input_Arr[i]) );
         
        
    } 
    
    
 
    
    
    
    
    
    
    
/**********  URL Loading *************/    
    
snoopAddressBar = "snoop_url_addressbar";
snoopFrame = "snoop_frame";
snoopFrameGoBt = "snoop_url_go";
snoopSpinner  = "snoop_spinner";  
function LoadURL(){ 
    
    
     var app_url = $('#' +snoopAddressBar).val();
    
     var $iframe = $('#' + snoopFrame);
    if ( $iframe.length ) {
        $iframe.attr('src',app_url);   
        

        return false;
    }
    return true;
}
      

$('#' +snoopFrameGoBt ).bind( "click",LoadURL);
    
  
    
function StartUpdateURL(URL){ 
     
    //$('#' +snoopSpinner).show();
    $('#' +snoopAddressBar).css("color", "#ff0000");
    $('#' +snoopAddressBar).val(URL);
}    
function FinishUpdateURL(URL){  
     //$('#' +snoopSpinner).hide();
     $('#' +snoopAddressBar).css("color", "#000000");
    $('#' +snoopAddressBar).val(URL);
}    
   
    
    
    
    
   
  
   
    
</script>

    
</html>